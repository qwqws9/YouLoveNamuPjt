<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CommentMapper">
 	
 	
	<resultMap id="commentMap" type="comment">
		<result property="commentCode" 				column="COMMENT_CODE" 				jdbcType="NUMERIC"/>
		<result property="boardCode"				column="BOARD_CODE" 				jdbcType="NUMERIC" />
		<result property="detailCode" 				column="DETAIL_CODE" 				jdbcType="NUMERIC" />
		<result property="commentContent" 			column="COMMENT_CONTENT" 			jdbcType="VARCHAR" />
		<result property="step" 					column="STEP" 						jdbcType="NUMERIC" />
		<result property="replyCode" 				column="REPLY_CODE" 				jdbcType="NUMERIC" />
		<result property="commentDate" 				column="COMMENT_DATE" 				jdbcType="VARCHAR" />
		<result property="writerComment" 			column="WRITER_COMMENT" 			jdbcType="VARCHAR"  />
	</resultMap>
	
	<!-- SQL : INSERT -->
	<insert 	id="addComment"		parameterType="comment" >
	 	INSERT
		INTO comments(COMMENT_CODE , BOARD_CODE, DETAIL_CODE, COMMENT_CONTENT, STEP, REPLY_CODE, COMMENT_DATE, WRITER_COMMENT ) 
		VALUES	 (	seq_comment_code.nextval , #{boardCode} , #{detailCode} , #{commentContent} , #{step:NUMERIC} , 
					#{replyCode:NUMERIC} , #{commentDate} , #{writerComment} )
	 </insert>
	 
	 <update id="updateComment" parameterType="comment">
	 	UPDATE comments set COMMENT_CONTENT=#{commentContent}, COMMENT_DATE=#{commentDate}
	 	WHERE COMMENT_CODE = #{commentCode}
	 </update>
	 
	 <update id="deleteComment" parameterType="comment">
	 	UPDATE comments set COMMENT_CONTENT='삭제된 댓글입니다.', COMMENT_DATE = null, WRITER_COMMENT = null   
	 	WHERE COMMENT_CODE = #{commentCode}
	 </update>
	 
	
	
	 
</mapper>
